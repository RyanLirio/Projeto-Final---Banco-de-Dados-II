@{
    ViewData["Title"] = "Home";
    Layout = "_Layout";
}

@model CineMa.Models.ViewModel.HomeViewModel



<div class="container">
    <!-- HERO CENTRALIZADO -->
    <section class="hero-cinema mx-auto">
        <div class="hero-overlay"></div>

        <div class="hero-content text-center">
            <h1 class="hero-title">Os Melhores Filmes Estão Aqui</h1>
            <p class="hero-subtitle">Aproveite estreias, salas premium e combos especiais!</p>

            <div class="mt-3 d-flex justify-content-center gap-2">
                <a href="#" class="btn btn-primary btn-lg px-4">Comprar Ingressos</a>
                <a href="#" class="btn btn-outline-light btn-lg px-4">Ver Estreias</a>
            </div>
        </div>
    </section>

    <!-- SELETOR DE CIDADE -->
    <section class="mb-5">
        <div class="city-selector-wrapper">
            <label class="city-label">Escolha sua cidade</label>

            <form method="get" asp-controller="Home" asp-action="Index">
                <select name="city" class="city-dropdown" onchange="this.form.submit()">
                    @foreach (var c in Model.City)
                    {
                        <option value="@c.City" selected="@(Model.SelectedCity == c.City)">
                            @c.City
                        </option>
                    }
                </select>
            </form>

        </div>
    </section>



    <!-- EM CARTAZ -->
    <section class="section-block">
        <h3 class="mb-4">Em Cartaz</h3>

        <div class="row g-4">
            @if (Model.MoviesByCity != null)
            {
                foreach (var m in Model.MoviesByCity)
                {
                    <div class="col-6 col-md-4 col-lg-3">
                        <div class="movie-card">
                            <img src="/images/@m.ImageUrl" alt="@m.Title" />
                            <h6>@m.Title</h6>
                            <a class="btn btn-primary w-100 mt-2" href="/Movie/Index/@m.Id">Ver Sessões</a>
                        </div>
                    </div>
                }
            }
            else
            {
                <div class="p-3 text-muted">Nenhum filme disponível no momento.</div>
            }   
        </div>
    </section>

    <!-- PRÓXIMAS SESSÕES -->
    <section class="mb-5 section-block">
        <h2 class="section-title mb-4">Próximas Sessões</h2>

        <div class="sessions-grid">
            @if (Model.SessionsByCity != null)
            {
                @foreach (var s in Model.SessionsByCity)
                {
                    <div class="session-card">

                        <div class="session-left">
                            <img class="session-poster" src="/images/@s.Movie.ImageUrl" alt="@s.Movie.Title">
                        </div>

                        <div class="session-center">
                            <h4 class="session-title">@s.Movie.Title</h4>

                            <div class="session-meta">
                                <span class="session-info">Sala @s.CinemaRoom.RoomNumber • @s.LanguageAudio.Name</span>

                                <span class="age-badge age-@s.Movie.MinimumAge">
                                    @s.Movie.MinimumAge
                                </span>
                            </div>
                        </div>

                        <div class="session-right">
                            <span class="session-hour-pill">@s.SessionHour.ToString("HH:mm")</span>
                            <a href="/Movie/Index/@s.Movie.Id" class="btn btn-primary btn-buy">Comprar</a>
                        </div>

                    </div>

                }
            }
        </div>
    </section>


    <!-- ESTREIAS -->
    <section class="mb-5">
        <h2 class="section-title">Em breve</h2>

        <div class="scroll-row">
            @if (Model.UpcomingReleases != null && Model.UpcomingReleases.Count > 0)
            {
                foreach (var movie in Model.UpcomingMoviesByCity)
                {
                    <div class="movie-poster">
                        <img src="~/images/@movie.ImageUrl" />
                        <div class="movie-info">
                            <h5>@movie.Title</h5>
                            <button class="btn btn-primary btn-sm w-100 mt-2">Comprar</button>
                        </div>
                    </div>
                }
            }
            else
            {
                <div class="p-3 text-muted">Nenhum filme disponível no momento.</div>
            }
        </div>
    </section>

    <!-- COMBOS -->
    <section class="mb-5">
        <h2 class="section-title">Combos</h2>

        <div class="combos-scroll">

            @if (Model.Combos != null)
            {
                var numCombo = 0;

                foreach (var product in Model.Combos)
                {
                    numCombo++;

                    <div class="combo-item">
                        <img class="combo-img" src="/images/combos/combo@(numCombo).jpg" alt="@product.Name" />

                        <div class="combo-info">
                            <h5>@product.Name</h5>
                            <p class="combo-price">R$ @product.Price</p>
                        </div>
                    </div>
                }
            }
        </div>
    </section>



</div>
