@model IEnumerable<Cine_Ma.Models.Chair>

@{
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
    ViewData["ActiveMenu"] = "Cinema";
    ViewData["Title"] = "Mapa da Sala";

    var room = ViewBag.Room;
    int totalRows = ViewBag.TotalRows;
    int totalColumns = ViewBag.TotalColumns;
    var rows = Model.Select(c => c.Row).Distinct().OrderBy(r => r).ToList();
}

<h1 class="texto">Mapa da Sala @room.RoomNumber</h1>
<hr />

<div class="mb-3">
    <a asp-controller="Cinema"
       asp-action="IndexAdmin"
       class="btn btn-purple texto">
        Voltar
    </a>

    <a asp-controller="Room"
       asp-action="Update"
       asp-route-id="@room.Id"
       class="btn btn-red texto ms-2">
        Editar Sala
    </a>
</div>

<div class="mt-4 text-center">

    <div class="screen text-center text-white mb-4 py-2"
         style="background: #444; border-radius: 6px;">
        TELA
    </div>

    <div class="d-flex flex-column align-items-center">

        @foreach (var row in rows)
        {
            <div class="d-flex mb-2">

                @for (int col = 1; col <= totalColumns; col++)
                {
                    var chair = Model.First(c => c.Row == row && c.Column == col);
                    string code = $"{row}{col}";
                    string color = chair.IsVip ? "#00d47e" : "#4d7cff";

                    <div style="
                                        width: 40px;
                                        height: 40px;
                                        border-radius: 6px;
                                        margin: 4px;
                                        background: @color;
                                        display: flex;
                                        justify-content: center;
                                        align-items: center;
                                        font-weight: bold;
                                        color: #fff;
                                        ">
                        @code
                    </div>
                }
            </div>
        }

    </div>

    <div class="mt-4 text-white">
        <div class="d-flex justify-content-center gap-4">

            <div class="d-flex align-items-center">
                <div style="width:20px; height:20px; background:#4d7cff; border-radius:4px;" class="me-2"></div>
                Normal
            </div>

            <div class="d-flex align-items-center">
                <div style="width:20px; height:20px; background:#00d47e; border-radius:4px;" class="me-2"></div>
                VIP
            </div>

        </div>
    </div>

</div>

<style>
    .texto {
        color: #f5f5f5 !important;
    }
</style>
